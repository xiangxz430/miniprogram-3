<!-- MBTIäººæ ¼æµ‹è¯•é¡µé¢ -->
<view class="container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="header">
    <text class="title">MBTIäººæ ¼ç³»ç»Ÿ</text>
    <text class="subtitle">æ¢ç´¢ä½ çš„äººæ ¼ç‰¹è´¨ä¸æ½œèƒ½</text>
  </view>
  
  <!-- æ ‡ç­¾é¡µå¯¼èˆª -->
  <view class="tab-nav {{tabNavClass}}">
    <view class="tab-item {{activeTab == 0 ? 'active' : ''}}" bindtap="switchTab" data-index="0">æ€§æ ¼æµ‹è¯•</view>
    <view class="tab-item {{activeTab == 1 ? 'active' : ''}}" bindtap="switchTab" data-index="1">ç„å­¦äººæ ¼æ¨¡å‹</view>
  </view>
  
  <!-- æµ‹è¯•å†…å®¹æ ‡ç­¾é¡µ -->
  <view class="tab-content" hidden="{{activeTab != 0}}">
    <!-- æµ‹è¯•æœªå®Œæˆæ—¶æ˜¾ç¤ºé¢˜ç›® -->
    <block wx:if="{{!testCompleted}}">
      <view class="progress-container">
        <view class="progress-text">é—®é¢˜ {{currentQuestion + 1}}/{{questions.length}}</view>
        <view class="progress-bar">
          <view class="progress-value" style="width: {{(currentQuestion + 1) / questions.length * 100}}%;"></view>
        </view>
      </view>
      
      <view class="question-card">
        <view class="question-number">ç¬¬{{currentQuestion + 1}}é¢˜</view>
        <view class="question-text">{{questions[currentQuestion].question}}</view>
        <view class="options-container">
          <view class="option {{selectedOption === 'A' ? 'active' : ''}}" bindtap="selectOption" data-value="A">
            <view class="radio {{selectedOption === 'A' ? 'checked' : ''}}"></view>
            <text>{{questions[currentQuestion].optionA}}</text>
          </view>
          <view class="option {{selectedOption === 'B' ? 'active' : ''}}" bindtap="selectOption" data-value="B">
            <view class="radio {{selectedOption === 'B' ? 'checked' : ''}}"></view>
            <text>{{questions[currentQuestion].optionB}}</text>
          </view>
        </view>
      </view>
      
      <view class="navigation-buttons">
        <button class="prev-btn" bindtap="prevQuestion" disabled="{{currentQuestion === 0}}">ä¸Šä¸€é¢˜</button>
        <button class="next-btn" bindtap="nextQuestion" disabled="{{!selectedOption}}">{{currentQuestion === questions.length - 1 ? 'å®Œæˆæµ‹è¯•' : 'ä¸‹ä¸€é¢˜'}}</button>
      </view>
      
      <view class="test-tips">
        <text class="tip-text">è¯·æ ¹æ®æ‚¨çš„ç¬¬ä¸€ååº”é€‰æ‹©æœ€ç¬¦åˆçš„é€‰é¡¹</text>
        <text class="tip-text">ç­”æ¡ˆæ²¡æœ‰å¯¹é”™ä¹‹åˆ†ï¼Œé€‰æ‹©æœ€é€‚åˆæ‚¨çš„é€‰é¡¹å³å¯</text>
      </view>
    </block>
    
    <!-- æµ‹è¯•å®Œæˆåæ˜¾ç¤ºç»“æœ -->
    <block wx:else>
      <view class="result-section">
        <view class="result-header">
          <view class="result-title">ä½ çš„MBTIç±»å‹</view>
          <text class="result-time">{{result.timeStr || 'åˆšåˆš'}}</text>
        </view>
        
        <view class="personality-card">
          <view class="flex justify-between items-center">
            <view class="personality-type">{{result.type}}</view>
            <view class="personality-percentage">å æ¯” {{result.percentage}}</view>
          </view>
          <view class="personality-name">{{result.name}}</view>
          <view class="personality-alias">{{result.alias || 'æ€æƒ³å®¶'}}</view>
        </view>
        
        <view class="personality-description-box">
          <view class="personality-description">{{result.description}}</view>
        </view>
        
        <view class="section-title">æ€§æ ¼åå¥½åˆ†æ</view>
        <view class="preference-container">
          <view class="preference-item">
            <view class="preference-header">
              <view class="preference-name">å†…å‘ (I)</view>
              <view class="preference-vs">vs</view>
              <view class="preference-name">å¤–å‘ (E)</view>
            </view>
            <view class="preference-bar">
              <view class="preference-value" style="width: {{result.scores.I}}%;"></view>
            </view>
            <view class="preference-percentage">{{result.scores.I}}%</view>
          </view>
          
          <view class="preference-item">
            <view class="preference-header">
              <view class="preference-name">ç›´è§‰ (N)</view>
              <view class="preference-vs">vs</view>
              <view class="preference-name">å®æ„Ÿ (S)</view>
            </view>
            <view class="preference-bar">
              <view class="preference-value" style="width: {{result.scores.N}}%;"></view>
            </view>
            <view class="preference-percentage">{{result.scores.N}}%</view>
          </view>
          
          <view class="preference-item">
            <view class="preference-header">
              <view class="preference-name">æƒ…æ„Ÿ (F)</view>
              <view class="preference-vs">vs</view>
              <view class="preference-name">æ€è€ƒ (T)</view>
            </view>
            <view class="preference-bar">
              <view class="preference-value" style="width: {{result.scores.F}}%;"></view>
            </view>
            <view class="preference-percentage">{{result.scores.F}}%</view>
          </view>
          
          <view class="preference-item">
            <view class="preference-header">
              <view class="preference-name">åˆ¤æ–­ (J)</view>
              <view class="preference-vs">vs</view>
              <view class="preference-name">è®¤çŸ¥ (P)</view>
            </view>
            <view class="preference-bar">
              <view class="preference-value" style="width: {{result.scores.P}}%;"></view>
            </view>
            <view class="preference-percentage">{{result.scores.P}}%</view>
          </view>
        </view>
        
        <view class="section-title">è®¤çŸ¥åŠŸèƒ½æ ˆ</view>
        <view class="cognitive-functions">
          <view class="function-item primary">
            <view class="function-header">
              <text class="function-name">{{result.functions[0].code}} - {{result.functions[0].name}}</text>
              <text class="function-role">ä¸»å¯¼åŠŸèƒ½</text>
            </view>
            <text class="function-description">{{result.functions[0].description}}</text>
          </view>
          
          <view class="function-item secondary">
            <view class="function-header">
              <text class="function-name">{{result.functions[1].code}} - {{result.functions[1].name}}</text>
              <text class="function-role">è¾…åŠ©åŠŸèƒ½</text>
            </view>
            <text class="function-description">{{result.functions[1].description}}</text>
          </view>
          
          <view class="function-item tertiary">
            <view class="function-header">
              <text class="function-name">{{result.functions[2].code}} - {{result.functions[2].name}}</text>
              <text class="function-role">ç¬¬ä¸‰åŠŸèƒ½</text>
            </view>
            <text class="function-description">{{result.functions[2].description}}</text>
          </view>
          
          <view class="function-item inferior">
            <view class="function-header">
              <text class="function-name">{{result.functions[3].code}} - {{result.functions[3].name}}</text>
              <text class="function-role">åŠ£åŠ¿åŠŸèƒ½</text>
            </view>
            <text class="function-description">{{result.functions[3].description}}</text>
          </view>
        </view>
        
        <button class="restart-btn" bindtap="restartTest">é‡æ–°æµ‹è¯•</button>
      </view>
    </block>
  </view>
  
  <!-- äººæ ¼æ¨¡å‹æ ‡ç­¾é¡µ -->
  <view class="tab-content" hidden="{{activeTab != 1}}">
    <view class="model-section">
      <view class="section-title">å‘½ç†äººæ ¼æ¨¡å‹</view>
      
      <view class="model-card">
        <view class="model-header">
          <view class="model-icon">â˜¯</view>
          <view class="model-title">
            <text class="model-name">å››æŸ±ä¸MBTIè½¬åŒ–</text>
            <text class="model-subtitle">å°†å…«å­—åç¥å¯¹åº”MBTIåŠŸèƒ½è½´</text>
          </view>
        </view>
        
        <view class="model-content">
          <view class="connection-item">
            <text class="connection-left">æ­£å®˜</text>
            <view class="connection-line"></view>
            <text class="connection-right">Te</text>
          </view>
          <view class="connection-item">
            <text class="connection-left">ä¼¤å®˜</text>
            <view class="connection-line"></view>
            <text class="connection-right">Ne</text>
          </view>
          <view class="connection-item">
            <text class="connection-left">é£Ÿç¥</text>
            <view class="connection-line"></view>
            <text class="connection-right">Fe</text>
          </view>
          <view class="connection-item">
            <text class="connection-left">åå°</text>
            <view class="connection-line"></view>
            <text class="connection-right">Ni</text>
          </view>
        </view>
      </view>
      
      <view class="personality-grid">
        <view class="personality-grid-item">
          <view class="grid-title">åŸç”Ÿäººæ ¼</view>
          <view class="grid-type">{{modelData.nativeType}}</view>
          <view class="grid-name">{{modelData.nativeName}}</view>
          <view class="grid-description">{{modelData.nativeDescription}}</view>
        </view>
        
        <view class="personality-grid-item">
          <view class="grid-title">ç¤¾ä¼šé¢å…·</view>
          <view class="grid-type">{{modelData.socialType}}</view>
          <view class="grid-name">{{modelData.socialName}}</view>
          <view class="grid-description">{{modelData.socialDescription}}</view>
        </view>
      </view>
      
      <view class="radar-section">
        <view class="section-title">äººæ ¼èƒ½é‡é›·è¾¾</view>
        <view class="radar-chart">
          <view class="radar-value"></view>
        </view>
        <view class="radar-labels">
          <text class="radar-label">æ€è€ƒåŠ›</text>
          <text class="radar-label">åˆ›é€ åŠ›</text>
          <text class="radar-label">æ‰§è¡ŒåŠ›</text>
          <text class="radar-label">æ„ŸçŸ¥åŠ›</text>
        </view>
      </view>
    </view>
    
    <view class="career-section">
      <view class="section-title">èŒä¸šç½—ç›˜</view>
      
      <view class="industry-match">
        <view class="industry-header">
          <view class="icon icon-blue">ğŸ’¼</view>
          <view class="industry-title">è¡Œä¸šåŒ¹é…</view>
        </view>
        
        <view class="industry-description">æ ¹æ®ä½ çš„äº”è¡Œå–œç”¨ç¥å’ŒMBTIç‰¹è´¨ï¼Œä»¥ä¸‹è¡Œä¸šæœ€é€‚åˆä½ ï¼š</view>
        
        <view class="industry-grid">
          <view class="industry-item" wx:for="{{modelData.industries}}" wx:key="index">
            <view class="icon {{item.icon}} icon-blue"></view>
            <text class="industry-item-name">{{item.name}}</text>
          </view>
        </view>
      </view>
      
      <view class="direction-match">
        <view class="direction-header">
          <view class="icon icon-blue">ğŸ§­</view>
          <view class="direction-title">å·¥ä½œæ–¹ä½</view>
        </view>
        
        <view class="direction-grid">
          <view class="direction-item {{item.type}}" wx:for="{{modelData.directions}}" wx:key="index">
            <text class="direction-item-name">{{item.name}} ({{item.type === 'good' ? 'å‰' : 'å¿Œ'}})</text>
          </view>
        </view>
        
        <view class="direction-tip">
          <view class="tip-icon">â„¹ï¸</view>
          <text class="tip-text">{{modelData.directionTip}}</text>
        </view>
      </view>
    </view>
  </view>
</view> 