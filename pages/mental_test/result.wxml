<view class="result-container">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-container">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ç»“æœä¸­...</text>
  </view>

  <!-- ç»“æœå†…å®¹ -->
  <view wx:else class="result-content">
    <!-- ç»“æœå¤´éƒ¨ -->
    <view class="result-header">
      <view class="result-icon" style="background: linear-gradient(135deg, {{result.color}}, #667eea);">
        <text class="icon-emoji">{{result.icon}}</text>
      </view>
      <view class="result-title">
        <text class="test-name">{{result.testName}}</text>
        <text class="test-date">{{result.date}}</text>
      </view>
    </view>

    <!-- æ€»ä½“å¾—åˆ†å¡ç‰‡ -->
    <view class="score-card">
      <view class="score-main">
        <view class="score-circle" style="border-color: {{result.levelColor}};">
          <text class="score-number">{{result.score}}</text>
          <text class="score-unit">åˆ†</text>
        </view>
        <view class="score-info">
          <view class="score-level" style="color: {{result.levelColor}};">{{result.level}}</view>
          <view class="score-summary">{{result.summary}}</view>
        </view>
      </view>
      <view class="score-detail">
        <text class="score-range">å¾—åˆ†èŒƒå›´ï¼š{{result.totalScore}}/{{result.maxScore}}</text>
      </view>
    </view>

    <!-- ç»´åº¦åˆ†æ -->
    <view wx:if="{{result.dimensions && result.dimensions.length > 0}}" class="dimensions-section">
      <view class="section-header">
        <text class="section-title">ğŸ“Š ç»´åº¦åˆ†æ</text>
        <text class="section-subtitle">å„ç»´åº¦å¾—åˆ†è¯¦æƒ…</text>
      </view>
      
      <view class="dimensions-list">
        <view wx:for="{{result.dimensions}}" wx:key="name" class="dimension-item">
          <view class="dimension-header">
            <text class="dimension-name">{{item.name}}</text>
            <text class="dimension-score">{{item.score}}/{{item.maxScore}}</text>
          </view>
          <view class="dimension-bar">
            <view class="dimension-progress" 
                  style="width: {{item.percentage}}%; background-color: {{item.color === 'green' ? '#52c41a' : item.color === 'yellow' ? '#faad14' : item.color === 'red' ? '#ff4d4f' : '#1890ff'}};"></view>
          </view>
          <text class="dimension-desc">{{item.description}}</text>
        </view>
      </view>
    </view>

    <!-- ä¸“ä¸šå»ºè®® -->
    <view wx:if="{{result.suggestions && result.suggestions.length > 0}}" class="suggestions-section">
      <view class="section-header">
        <text class="section-title">ğŸ’¡ ä¸“ä¸šå»ºè®®</text>
        <text class="section-subtitle">åŸºäºæ‚¨çš„æµ‹è¯•ç»“æœ</text>
      </view>
      
      <view class="suggestions-list">
        <view wx:for="{{result.suggestions}}" wx:key="title" class="suggestion-item" 
              bindtap="viewSuggestionDetail" data-suggestion="{{item}}"
              style="border-left-color: {{item.color === 'red' ? '#ff4d4f' : item.color === 'orange' ? '#fa8c16' : item.color === 'yellow' ? '#faad14' : item.color === 'green' ? '#52c41a' : item.color === 'blue' ? '#1890ff' : '#722ed1'}};">
          <view class="suggestion-header">
            <text class="suggestion-icon">{{item.icon}}</text>
            <text class="suggestion-title">{{item.title}}</text>
          </view>
          <text class="suggestion-desc">{{item.description}}</text>
          <view class="suggestion-arrow">
            <text class="arrow-icon">â–¶</text>
          </view>
        </view>
      </view>
    </view>

    <!-- é£é™©æç¤º -->
    <view wx:if="{{result.riskLevel === 'severe'}}" class="risk-warning">
      <view class="warning-content">
        <text class="warning-icon">âš ï¸</text>
        <view class="warning-text">
          <text class="warning-title">é‡è¦æé†’</text>
          <text class="warning-desc">æ‚¨çš„æµ‹è¯•ç»“æœæ˜¾ç¤ºéœ€è¦ä¸“ä¸šå…³æ³¨ï¼Œå»ºè®®å°½å¿«å’¨è¯¢å¿ƒç†å¥åº·ä¸“å®¶</text>
        </view>
      </view>
      <view class="warning-actions">
        <button class="emergency-btn" bindtap="emergencyHelp">ç´§æ€¥æ±‚åŠ©</button>
        <button class="consult-btn" bindtap="consultExpert">å’¨è¯¢ä¸“å®¶</button>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-buttons">
      <button class="action-btn secondary" bindtap="shareResult">
        <text class="btn-icon">ğŸ“¤</text>
        <text class="btn-text">åˆ†äº«ç»“æœ</text>
      </button>
      <button class="action-btn secondary" bindtap="viewHistory">
        <text class="btn-icon">ğŸ“‹</text>
        <text class="btn-text">å†å²è®°å½•</text>
      </button>
      <button class="action-btn primary" bindtap="retakeTest">
        <text class="btn-icon">ğŸ”„</text>
        <text class="btn-text">é‡æ–°æµ‹è¯•</text>
      </button>
    </view>

    <!-- ä¸“å®¶å’¨è¯¢åŒºåŸŸ -->
    <view wx:if="{{result.riskLevel !== 'low'}}" class="consult-section">
      <view class="consult-header">
        <text class="consult-title">ğŸ‘©â€âš•ï¸ éœ€è¦ä¸“ä¸šå¸®åŠ©ï¼Ÿ</text>
      </view>
      <view class="consult-content">
        <text class="consult-desc">å¦‚æœæ‚¨å¯¹ç»“æœæœ‰ç–‘é—®æˆ–éœ€è¦ä¸“ä¸šæŒ‡å¯¼ï¼Œå»ºè®®å’¨è¯¢å¿ƒç†å¥åº·ä¸“å®¶</text>
        <button class="consult-expert-btn" bindtap="consultExpert">è”ç³»ä¸“å®¶</button>
      </view>
    </view>
  </view>

  <!-- å»ºè®®è¯¦æƒ…æ¨¡æ€æ¡† -->
  <view wx:if="{{showSuggestionDetail}}" class="suggestion-modal">
    <view class="modal-mask" bindtap="closeSuggestionDetail"></view>
    <view class="modal-content">
      <view class="modal-header">
        <text class="modal-icon">{{selectedSuggestion.icon}}</text>
        <text class="modal-title">{{selectedSuggestion.title}}</text>
        <text class="modal-close" bindtap="closeSuggestionDetail">âœ•</text>
      </view>
      <view class="modal-body">
        <text class="modal-description">{{selectedSuggestion.description}}</text>
      </view>
      <view class="modal-footer">
        <button class="modal-btn" bindtap="closeSuggestionDetail">çŸ¥é“äº†</button>
      </view>
    </view>
  </view>
</view> 